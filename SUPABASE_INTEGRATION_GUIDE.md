# ุฏููู ุฑุจุท ุงููููุน ุงูุขุฎุฑ ูุน Supabase ููุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุฑุจุท ุฃู ูููุน ุฃู ุชุทุจูู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase ูุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงูุทุนุงู ูุงููุดุฑูุจุงุช.

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `menu_items`

```sql
CREATE TABLE menu_items (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  category TEXT NOT NULL,
  price DECIMAL(10,2),
  prices JSONB,
  description TEXT,
  options JSONB,
  image_url TEXT,
  is_available BOOLEAN DEFAULT true,
  sort_order INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ุงูููุงุฑุณ (Indexes)

```sql
CREATE INDEX idx_menu_items_category ON menu_items(category);
CREATE INDEX idx_menu_items_available ON menu_items(is_available);
CREATE INDEX idx_menu_items_sort ON menu_items(sort_order);
```

## ๐ง ุฅุนุฏุงุฏ Supabase

### 1. ุฅูุดุงุก ูุดุฑูุน Supabase

1. ุงุฐูุจ ุฅูู [supabase.com](https://supabase.com)
2. ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ ุฃู ุณุฌู ุงูุฏุฎูู
3. ุงุถุบุท "New Project"
4. ุงุฎุชุฑ ุงุณู ุงููุดุฑูุน ูุงูููุทูุฉ
5. ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน

### 2. ุงูุญุตูู ุนูู ููุงุชูุญ API

```javascript
// ูู ููุญุฉ ุชุญูู Supabase > Settings > API
const SUPABASE_URL = "https://your-project-id.supabase.co";
const SUPABASE_ANON_KEY = "your-anon-key";
const SUPABASE_SERVICE_KEY = "your-service-key"; // ููุนูููุงุช ุงูุฅุฏุงุฑูุฉ
```

### 3. ุฅุนุฏุงุฏ RLS (Row Level Security)

```sql
-- ุชูุนูู RLS
ALTER TABLE menu_items ENABLE ROW LEVEL SECURITY;

-- ุณูุงุณุฉ ูููุฑุงุกุฉ ุงูุนุงูุฉ
CREATE POLICY "Allow public read access" ON menu_items
  FOR SELECT USING (true);

-- ุณูุงุณุฉ ูููุชุงุจุฉ (ุชุญุชุงุฌ ูุตุงุฏูุฉ)
CREATE POLICY "Allow authenticated insert" ON menu_items
  FOR INSERT WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Allow authenticated update" ON menu_items
  FOR UPDATE USING (auth.role() = 'authenticated');

CREATE POLICY "Allow authenticated delete" ON menu_items
  FOR DELETE USING (auth.role() = 'authenticated');
```

## ๐ฑ ุฑุจุท ุงููููุน ุงูุขุฎุฑ

### 1. ุชุซุจูุช Supabase Client

```bash
# JavaScript/Node.js
npm install @supabase/supabase-js

# Python
pip install supabase

# PHP
composer require supabase/supabase-php

# Flutter/Dart
dart pub add supabase_flutter
```

### 2. ุฅุนุฏุงุฏ ุงูุนููู (Client Setup)

#### JavaScript/React

```javascript
import { createClient } from "@supabase/supabase-js";

const supabaseUrl = "https://your-project-id.supabase.co";
const supabaseKey = "your-anon-key";

export const supabase = createClient(supabaseUrl, supabaseKey);
```

#### Python

```python
from supabase import create_client, Client

url: str = "https://your-project-id.supabase.co"
key: str = "your-anon-key"

supabase: Client = create_client(url, key)
```

#### PHP

```php
use Supabase\Supabase;

$supabase = new Supabase('your-project-id', 'your-anon-key');
```

### 3. ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ (CRUD Operations)

#### ุฌูุจ ุฌููุน ุงูุนูุงุตุฑ

```javascript
// JavaScript
const { data: menuItems, error } = await supabase
  .from("menu_items")
  .select("*")
  .order("sort_order", { ascending: true });

if (error) {
  console.error("Error:", error);
} else {
  console.log("Menu items:", menuItems);
}
```

```python
# Python
response = supabase.table('menu_items').select('*').order('sort_order').execute()
menu_items = response.data
```

#### ุฌูุจ ุนูุงุตุฑ ุญุณุจ ุงูุชุตููู

```javascript
// JavaScript
const { data: hotDrinks, error } = await supabase
  .from("menu_items")
  .select("*")
  .eq("category", "hotDrinks")
  .eq("is_available", true)
  .order("sort_order");
```

#### ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ

```javascript
// JavaScript
const { data, error } = await supabase.from("menu_items").insert([
  {
    name: "ูููุฉ ุนุฑุจูุฉ ุณุงุฏุฉ",
    category: "hotDrinks",
    price: 8.0,
    options: ["ุณุงุฏุฉ", "ูุนุฏูุฉ", "ูุงูุตุฉ"],
    is_available: true,
    sort_order: 1,
  },
]);
```

#### ุชุญุฏูุซ ุนูุตุฑ

```javascript
// JavaScript
const { data, error } = await supabase
  .from("menu_items")
  .update({
    price: 9.0,
    is_available: false,
  })
  .eq("id", "item-id-here");
```

#### ุญุฐู ุนูุตุฑ

```javascript
// JavaScript
const { error } = await supabase
  .from("menu_items")
  .delete()
  .eq("id", "item-id-here");
```

## ๐ Real-time Updates

### ุงูุงุดุชุฑุงู ูู ุงูุชุญุฏูุซุงุช ุงููุจุงุดุฑุฉ

```javascript
// JavaScript
const subscription = supabase
  .channel("menu_items_changes")
  .on(
    "postgres_changes",
    {
      event: "*",
      schema: "public",
      table: "menu_items",
    },
    (payload) => {
      console.log("Change received!", payload);
      // ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู
    }
  )
  .subscribe();

// ุฅูุบุงุก ุงูุงุดุชุฑุงู
subscription.unsubscribe();
```

## ๐จ ุฃูุซูุฉ ุชุทุจูููุฉ

### 1. ุตูุญุฉ ูุงุฆูุฉ ุงูุทุนุงู

```javascript
// React Component
import { useState, useEffect } from "react";
import { supabase } from "./supabaseClient";

function MenuPage() {
  const [menuItems, setMenuItems] = useState([]);
  const [categories, setCategories] = useState([]);
  const [selectedCategory, setSelectedCategory] = useState("all");

  useEffect(() => {
    fetchMenuItems();
  }, []);

  const fetchMenuItems = async () => {
    const { data, error } = await supabase
      .from("menu_items")
      .select("*")
      .eq("is_available", true)
      .order("sort_order");

    if (error) {
      console.error("Error:", error);
    } else {
      setMenuItems(data);
      // ุงุณุชุฎุฑุงุฌ ุงูุชุตูููุงุช ุงููุฑูุฏุฉ
      const uniqueCategories = [...new Set(data.map((item) => item.category))];
      setCategories(uniqueCategories);
    }
  };

  const filteredItems =
    selectedCategory === "all"
      ? menuItems
      : menuItems.filter((item) => item.category === selectedCategory);

  return (
    <div>
      {/* ุดุฑูุท ุงูุชุตูููุงุช */}
      <div className="category-tabs">
        <button onClick={() => setSelectedCategory("all")}>ุงููู</button>
        {categories.map((category) => (
          <button
            key={category}
            onClick={() => setSelectedCategory(category)}
            className={selectedCategory === category ? "active" : ""}
          >
            {getCategoryName(category)}
          </button>
        ))}
      </div>

      {/* ุนุฑุถ ุงูุนูุงุตุฑ */}
      <div className="menu-items">
        {filteredItems.map((item) => (
          <div key={item.id} className="menu-item">
            <h3>{item.name}</h3>
            <p>{item.description}</p>
            <div className="price">
              {item.price
                ? `$${item.price}`
                : item.prices
                ? `$${item.prices.M} - $${item.prices.L}`
                : "ุงูุณุนุฑ ุบูุฑ ูุญุฏุฏ"}
            </div>
            {item.options && (
              <div className="options">
                {item.options.map((option) => (
                  <span key={option} className="option-tag">
                    {option}
                  </span>
                ))}
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
}
```

### 2. ุฅุฏุงุฑุฉ ุงููุงุฆูุฉ (ูููุฏูุฑ)

```javascript
// Admin Panel
function AdminMenuManagement() {
  const [menuItems, setMenuItems] = useState([]);
  const [editingItem, setEditingItem] = useState(null);

  const addMenuItem = async (itemData) => {
    const { data, error } = await supabase
      .from("menu_items")
      .insert([itemData])
      .select();

    if (error) {
      alert("ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุนูุตุฑ: " + error.message);
    } else {
      setMenuItems([...menuItems, ...data]);
    }
  };

  const updateMenuItem = async (id, updates) => {
    const { data, error } = await supabase
      .from("menu_items")
      .update(updates)
      .eq("id", id)
      .select();

    if (error) {
      alert("ุฎุทุฃ ูู ุชุญุฏูุซ ุงูุนูุตุฑ: " + error.message);
    } else {
      setMenuItems(
        menuItems.map((item) =>
          item.id === id ? { ...item, ...updates } : item
        )
      );
    }
  };

  const deleteMenuItem = async (id) => {
    const { error } = await supabase.from("menu_items").delete().eq("id", id);

    if (error) {
      alert("ุฎุทุฃ ูู ุญุฐู ุงูุนูุตุฑ: " + error.message);
    } else {
      setMenuItems(menuItems.filter((item) => item.id !== id));
    }
  };

  const toggleAvailability = async (id, isAvailable) => {
    await updateMenuItem(id, { is_available: isAvailable });
  };

  return (
    <div>
      {/* ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู */}
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          placeholder="ุงุณู ุงูุนูุตุฑ"
          value={editingItem?.name || ""}
          onChange={(e) =>
            setEditingItem({ ...editingItem, name: e.target.value })
          }
        />
        <select
          value={editingItem?.category || ""}
          onChange={(e) =>
            setEditingItem({ ...editingItem, category: e.target.value })
          }
        >
          <option value="hotDrinks">ูุดุฑูุจุงุช ุณุงุฎูุฉ</option>
          <option value="coldDrinks">ูุดุฑูุจุงุช ุจุงุฑุฏุฉ</option>
          {/* ุงููุฒูุฏ ูู ุงูุชุตูููุงุช */}
        </select>
        <input
          type="number"
          placeholder="ุงูุณุนุฑ"
          value={editingItem?.price || ""}
          onChange={(e) =>
            setEditingItem({
              ...editingItem,
              price: parseFloat(e.target.value),
            })
          }
        />
        <button type="submit">{editingItem?.id ? "ุชุญุฏูุซ" : "ุฅุถุงูุฉ"}</button>
      </form>

      {/* ูุงุฆูุฉ ุงูุนูุงุตุฑ */}
      <div className="items-list">
        {menuItems.map((item) => (
          <div key={item.id} className="item-card">
            <h3>{item.name}</h3>
            <p>{item.category}</p>
            <p>${item.price}</p>
            <div className="actions">
              <button onClick={() => setEditingItem(item)}>ุชุนุฏูู</button>
              <button
                onClick={() => toggleAvailability(item.id, !item.is_available)}
              >
                {item.is_available ? "ุฅุฎูุงุก" : "ุฅุธูุงุฑ"}
              </button>
              <button onClick={() => deleteMenuItem(item.id)}>ุญุฐู</button>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

## ๐ ุงููุตุงุฏูุฉ ูุงูุฃูุงู

### 1. ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ

```javascript
// ุชุณุฌูู ุงูุฏุฎูู
const { data, error } = await supabase.auth.signInWithPassword({
  email: "admin@example.com",
  password: "password123",
});

// ุชุณุฌูู ุงูุฎุฑูุฌ
await supabase.auth.signOut();

// ุงูุชุญูู ูู ุญุงูุฉ ุงููุตุงุฏูุฉ
const {
  data: { user },
} = await supabase.auth.getUser();
```

### 2. ุญูุงูุฉ ุงูุนูููุงุช ุงูุญุณุงุณุฉ

```javascript
// ููุท ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ูููููู ุงูุชุนุฏูู
const updateMenuItem = async (id, updates) => {
  const {
    data: { user },
  } = await supabase.auth.getUser();

  if (!user) {
    throw new Error("ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู");
  }

  const { data, error } = await supabase
    .from("menu_items")
    .update(updates)
    .eq("id", id)
    .select();

  return { data, error };
};
```

## ๐ ุงุณุชุนูุงูุงุช ูุชูุฏูุฉ

### 1. ุงูุจุญุซ ูุงูุชุตููุฉ

```javascript
// ุงูุจุญุซ ูู ุงูุฃุณูุงุก ูุงูุฃูุตุงู
const { data } = await supabase
  .from("menu_items")
  .select("*")
  .or("name.ilike.%ูููุฉ%,description.ilike.%ูููุฉ%")
  .eq("is_available", true);

// ุชุตููุฉ ุญุณุจ ุงูุณุนุฑ
const { data } = await supabase
  .from("menu_items")
  .select("*")
  .gte("price", 5)
  .lte("price", 15)
  .order("price");
```

### 2. ุฅุญุตุงุฆูุงุช

```javascript
// ุนุฏุฏ ุงูุนูุงุตุฑ ูู ูู ุชุตููู
const { data } = await supabase
  .from("menu_items")
  .select("category")
  .eq("is_available", true);

const categoryCounts = data.reduce((acc, item) => {
  acc[item.category] = (acc[item.category] || 0) + 1;
  return acc;
}, {});

// ูุชูุณุท ุงูุฃุณุนุงุฑ
const { data: prices } = await supabase
  .from("menu_items")
  .select("price")
  .not("price", "is", null);

const averagePrice =
  prices.reduce((sum, item) => sum + item.price, 0) / prices.length;
```

## ๐ ูุดุฑ ุงูุจูุงูุงุช ุงูุฃูููุฉ

### 1. ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ูู ููู JSON

```javascript
// ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ููู
import menuData from "./menuData.json";

const importMenuData = async () => {
  const items = [];

  Object.entries(menuData).forEach(([categoryKey, categoryData]) => {
    categoryData.items.forEach((item, index) => {
      items.push({
        name: item.name,
        category: categoryKey,
        price: item.price,
        prices: item.prices,
        options: item.options,
        description: item.description,
        is_available: true,
        sort_order: index,
      });
    });
  });

  const { data, error } = await supabase.from("menu_items").insert(items);

  if (error) {
    console.error("Error importing data:", error);
  } else {
    console.log("Data imported successfully:", data.length, "items");
  }
};
```

### 2. SQL Script ููุจูุงูุงุช ุงูุฃูููุฉ

```sql
-- ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
INSERT INTO menu_items (name, category, price, options, is_available, sort_order) VALUES
('ูููุฉ ุนุฑุจูุฉ ุณุงุฏุฉ', 'hotDrinks', 8.00, '["ุณุงุฏุฉ", "ูุนุฏูุฉ", "ูุงูุตุฉ"]', true, 1),
('ูููุฉ ุนุฑุจูุฉ ูุนุฏูุฉ', 'hotDrinks', 8.00, '["ุณุงุฏุฉ", "ูุนุฏูุฉ", "ูุงูุตุฉ"]', true, 2),
('ูุงุจุชุดููู', 'hotDrinks', 6.00, null, true, 3),
-- ุงููุฒูุฏ ูู ุงูุจูุงูุงุช...
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง

```javascript
// ุฎุทุฃ ูู ุงูุงุชุตุงู
if (error?.code === "PGRST301") {
  console.log("ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช");
}

// ุฎุทุฃ ูู ุงูุตูุงุญูุงุช
if (error?.code === "42501") {
  console.log("ููุณ ูุฏูู ุตูุงุญูุฉ ููููุงู ุจูุฐู ุงูุนูููุฉ");
}

// ุฎุทุฃ ูู ุงูุจูุงูุงุช
if (error?.code === "23505") {
  console.log("ุงูุนูุตุฑ ููุฌูุฏ ูุณุจูุงู");
}
```

### 2. ุชุณุฌูู ุงูุฃุฎุทุงุก

```javascript
const logError = (operation, error) => {
  console.error(`${operation} failed:`, {
    message: error.message,
    code: error.code,
    details: error.details,
    hint: error.hint,
  });
};

// ุงุณุชุฎุฏุงููุง
const { data, error } = await supabase.from("menu_items").select("*");

if (error) {
  logError("fetchMenuItems", error);
}
```

## ๐ฑ ุชุทุจููุงุช ูุฎุชููุฉ

### 1. ุชุทุจูู Flutter

```dart
// pubspec.yaml
dependencies:
  supabase_flutter: ^2.0.0

// main.dart
import 'package:supabase_flutter/supabase_flutter.dart';

class MenuService {
  static Future<List<Map<String, dynamic>>> getMenuItems() async {
    final response = await Supabase.instance.client
        .from('menu_items')
        .select()
        .eq('is_available', true)
        .order('sort_order');

    return response;
  }
}
```

### 2. ุชุทุจูู React Native

```javascript
// App.js
import { createClient } from "@supabase/supabase-js";

const supabase = createClient(
  "https://your-project-id.supabase.co",
  "your-anon-key"
);

const fetchMenu = async () => {
  const { data, error } = await supabase
    .from("menu_items")
    .select("*")
    .eq("is_available", true);

  return data;
};
```

## ๐ฏ ูุตุงุฆุญ ูููุฉ

1. **ุงุณุชุฎุฏู ุงูููุงุฑุณ** ูุชุญุณูู ุงูุฃุฏุงุก
2. **ูุนูู RLS** ูุญูุงูุฉ ุงูุจูุงูุงุช
3. **ุงุณุชุฎุฏู Real-time** ููุชุญุฏูุซุงุช ุงููุจุงุดุฑุฉ
4. **ุงุฎุชุจุฑ ุงูุงุณุชุนูุงูุงุช** ูุจู ุงููุดุฑ
5. **ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ** ูู ุงูุจูุงูุงุช
6. **ุฑุงูุจ ุงูุฃุฏุงุก** ุจุงุณุชุฎุฏุงู ููุญุฉ ุชุญูู Supabase

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

- [ูุซุงุฆู Supabase ุงูุฑุณููุฉ](https://supabase.com/docs)
- [ูุฌุชูุน Supabase](https://github.com/supabase/supabase/discussions)
- [ุฃูุซูุฉ ุงูููุฏ](https://github.com/supabase/supabase/tree/master/examples)

---

**ููุงุญุธุฉ**: ุชุฃูุฏ ูู ุงุณุชุจุฏุงู `your-project-id` ู `your-anon-key` ุจุงูููู ุงููุนููุฉ ูู ูุดุฑูุน Supabase ุงูุฎุงุต ุจู.
