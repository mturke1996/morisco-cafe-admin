# نظام إدارة القائمة - موريسكو كافيه

## نظرة عامة

تم إنشاء نظام إدارة القائمة الجديد لموريسكو كافيه والذي يتيح إدارة شاملة لعناصر القائمة مع إمكانية رفع الصور وتفعيل/إلغاء تفعيل العناصر.

## الميزات الجديدة

### 1. قاعدة البيانات

- **جدول `menu_items`** في Supabase مع الحقول التالية:
  - `id`: معرف فريد
  - `name`: اسم العنصر
  - `category`: التصنيف
  - `price`: السعر (للعناصر بسعر واحد)
  - `prices`: الأسعار المتعددة (L/M)
  - `description`: الوصف
  - `options`: الخيارات المتاحة
  - `image_url`: رابط الصورة
  - `is_available`: حالة التوفر
  - `sort_order`: ترتيب العرض
  - `created_at` و `updated_at`: تواريخ الإنشاء والتحديث

### 2. صفحة إدارة القائمة

- **الوصول**: `/menu` من القائمة الجانبية
- **الميزات**:
  - عرض جميع عناصر القائمة في شبكة منظمة
  - البحث والتصفية حسب التصنيف
  - إضافة عناصر جديدة
  - تعديل العناصر الموجودة
  - حذف العناصر
  - تفعيل/إلغاء تفعيل العناصر
  - رفع الصور للعناصر
  - إدارة الخيارات والأسعار

### 3. أنواع الأسعار المدعومة

- **سعر واحد**: للعناصر التي لها سعر ثابت
- **أسعار متعددة**: للعناصر التي لها أحجام مختلفة (L/M)

### 4. إدارة الصور

- إمكانية رفع صور للعناصر عبر رابط URL
- عرض الصور في بطاقات العناصر
- دعم جميع تنسيقات الصور الشائعة

### 5. إدارة التوفر

- إمكانية تفعيل/إلغاء تفعيل العناصر
- عرض حالة التوفر بوضوح في الواجهة
- فلترة العناصر المتاحة فقط

## كيفية الاستخدام

### 1. تشغيل Migration

```sql
-- تشغيل ملف Migration في Supabase
-- الملف: supabase/migrations/20241220_create_menu_items.sql
```

### 2. استيراد البيانات الموجودة

```typescript
// في console المتصفح
import { runImport } from "./src/scripts/importMenuData.ts";
await runImport();
```

### 3. إضافة عنصر جديد

1. اذهب إلى صفحة إدارة القائمة (`/menu`)
2. اضغط على "إضافة عنصر"
3. املأ البيانات المطلوبة:
   - اسم العنصر
   - التصنيف
   - نوع السعر (واحد أو متعدد)
   - الوصف (اختياري)
   - الخيارات (اختياري)
   - رابط الصورة (اختياري)
   - ترتيب العرض
   - حالة التوفر

### 4. تعديل عنصر موجود

1. اضغط على أيقونة التعديل في بطاقة العنصر
2. عدّل البيانات المطلوبة
3. اضغط "تحديث"

### 5. حذف عنصر

1. اضغط على أيقونة الحذف في بطاقة العنصر
2. أكد الحذف

### 6. تفعيل/إلغاء تفعيل عنصر

1. اضغط على أيقونة العين في بطاقة العنصر
2. سيتم تغيير حالة التوفر فوراً

## الملفات المضافة

### 1. قاعدة البيانات

- `supabase/migrations/20241220_create_menu_items.sql`

### 2. Types

- `src/types/menu.ts`

### 3. Hooks

- `src/hooks/useMenu.ts`

### 4. الصفحات

- `src/pages/MenuManagement.tsx`

### 5. البيانات

- `src/data/menuData.ts`
- `src/scripts/importMenuData.ts`

### 6. التحديثات

- `src/App.tsx` - إضافة route جديد
- `src/components/AppSidebar.tsx` - إضافة رابط القائمة

## التصميم والواجهة

### 1. التصميم المتجاوب

- دعم جميع أحجام الشاشات
- تخطيط متكيف للهواتف والأجهزة اللوحية

### 2. الألوان والرموز

- ألوان مميزة لكل تصنيف
- رموز واضحة للعمليات المختلفة
- تصميم متسق مع باقي التطبيق

### 3. سهولة الاستخدام

- واجهة بديهية وسهلة الاستخدام
- عمليات سريعة ومباشرة
- رسائل تأكيد واضحة

## الأمان والأداء

### 1. الأمان

- حماية جميع العمليات بـ RLS (Row Level Security)
- التحقق من صحة البيانات
- معالجة الأخطاء بشكل آمن

### 2. الأداء

- استعلامات محسنة
- فهرسة قاعدة البيانات
- تحميل تدريجي للبيانات

## الدعم والمساعدة

للحصول على المساعدة أو الإبلاغ عن مشاكل:

1. تحقق من console المتصفح للأخطاء
2. تأكد من تشغيل Migration بشكل صحيح
3. تحقق من اتصال Supabase

## التطوير المستقبلي

### الميزات المخطط لها:

- رفع الصور مباشرة (بدلاً من الروابط)
- تصدير القائمة إلى PDF
- إحصائيات مفصلة للقائمة
- تكامل مع نظام الطلبات
- إدارة المخزون

---

**تم تطوير النظام بواسطة فريق موريسكو كافيه** ☕️
